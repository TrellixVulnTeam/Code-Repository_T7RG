(self.webpackChunklite=self.webpackChunklite||[]).push([[37801],{84033:(e,t,n)=>{"use strict";n.d(t,{MA:()=>l,Zh:()=>d,jM:()=>a});var o=n(63038),r=n.n(o),i=n(67294),s={mutedAuthorIds:[],setMutedAuthorIds:function(){},mutedPubIds:[],setMutedPubIds:function(){},dismissedPostIds:[],setDismissedPostIds:function(){},isMutingFromHomeFeed:!0,seeLessPostIds:[],setSeeLessPostIds:function(){}},l=function(e,t,n,o,r){return e.filter((function(e){var i,s,l,u,d,a;return!(t.indexOf(null===(i=e.post)||void 0===i||null===(s=i.creator)||void 0===s?void 0:s.id)>-1||n.indexOf(null===(l=e.post)||void 0===l||null===(u=l.collection)||void 0===u?void 0:u.id)>-1||o.indexOf(null===(d=e.post)||void 0===d?void 0:d.id)>-1||r.indexOf(null===(a=e.post)||void 0===a?void 0:a.id)>-1)}))},u=i.createContext(s),d=function(e){var t=e.children,n=i.useState(s.mutedAuthorIds),o=r()(n,2),l=o[0],d=o[1],a=i.useState(s.mutedPubIds),c=r()(a,2),p=c[0],f=c[1],v=i.useState(s.dismissedPostIds),m=r()(v,2),h=m[0],b=m[1],E=i.useState(s.seeLessPostIds),I=r()(E,2),P=I[0],S=I[1],w=s.isMutingFromHomeFeed;return i.createElement(u.Provider,{value:{mutedAuthorIds:l,setMutedAuthorIds:d,mutedPubIds:p,setMutedPubIds:f,dismissedPostIds:h,setDismissedPostIds:b,isMutingFromHomeFeed:w,seeLessPostIds:P,setSeeLessPostIds:S}},t)},a=function(){return i.useContext(u)}},37801:(e,t,n)=>{"use strict";n.d(t,{t:()=>G});var o=n(67294),r=n(60519),i=n(76532),s=n(73891),l=n(68421),u=n(19464),d=n(14391),a=n(319),c=n.n(a),p=n(59713),f=n.n(p),v=n(63038),m=n.n(v),h=n(5977),b=n(84033),E=n(97292),I=n(30570),P=n(36511),S=n(32262),w=n(29169),g=n(42933),x=n(82318),k=n(80362),y=n(95760),A=n(51512),T=n(85277),M=n(8403),C=n(67297),O=n(93394);function L(){return(L=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}var R=o.createElement("path",{d:"M6.2 16.8A7.5 7.5 0 1 0 16.8 6.2 7.5 7.5 0 0 0 6.2 16.8z",stroke:"#000",strokeWidth:2,strokeLinecap:"round"}),F=o.createElement("path",{d:"M6 6l11 11",stroke:"#000",strokeWidth:2});const j=function(e){return o.createElement("svg",L({width:19,height:19,viewBox:"0 0 23 23",fill:"none"},e),R,F)};var D=n(46829),V=n(64235),U=n(32589),_=function(e){var t=e.creatorId,n=e.viewerId,r=e.muteAuthor,i=e.hidePopover,s=e.eventData,l=e.isActiveExpandedPost,u=(0,A.pK)(),d=(0,y.Av)(),a={id:t||""},p=(0,U.Pd)(a).viewerEdge,f=!(null==p||!p.isFollowing),v=!(null==p||!p.isMuting),E=(0,I.sK)().clearExpandedState,P=(0,h.k6)(),w=(0,b.jM)(),g=w.mutedAuthorIds,k=w.setMutedAuthorIds,T=w.isMutingFromHomeFeed,M=o.useCallback((function(e){k([].concat(c()(g),[e]))}),[g]),C=(0,D.useMutation)(V.g,{variables:{targetUserId:t||""},optimisticResponse:{unfollowUser:{__typename:"User",id:t||"",viewerEdge:{__typename:"UserViewerEdge",id:"userId:".concat(t,"-viewerId:").concat(n),isFollowing:!1}}}}),O=m()(C,1)[0];return t?f?o.createElement(S.Sl,null,o.createElement(x.r,{onClick:function(){d.event("user.unfollowed",{targetUserId:t,source:u}),O(),i()}},"Unfollow this author")):v?null:o.createElement(S.Sl,null,o.createElement(x.r,{onClick:function(){d.event("user.muted",s),r(),T&&(M(t),l&&(E(),P.goBack())),i()}},"Mute this author")):null},B=n(84783),H=function(e){var t=e.collectionId,n=e.viewerId,r=e.hidePopover,i=e.mutePub,l=e.eventData,u=e.isActiveExpandedPost,d=(0,y.Av)(),a=(0,A.pK)(),p={id:t||""},f=(0,s.gY)(p).viewerEdge,v=!(null==f||!f.isFollowing),m=!(null==f||!f.isMuting),E=(0,B.MT)(t||"",n),P=(0,b.jM)(),w=P.mutedPubIds,g=P.setMutedPubIds,k=P.isMutingFromHomeFeed,T=(0,I.sK)().clearExpandedState,M=(0,h.k6)(),C=o.useCallback((function(e){g([].concat(c()(w),[e]))}),[w]);return t?v?o.createElement(S.Sl,null,o.createElement(x.r,{onClick:function(){d.event("collection.unfollowed",{collectionId:t,followSource:a}),E(),r()}},"Unfollow this publication")):m?null:o.createElement(S.Sl,null,o.createElement(x.r,{onClick:function(){d.event("collection.muted",l),i(),k&&(C(t),u&&(T(),M.goBack())),r()}},"Mute this publication")):null};function K(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function Q(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?K(Object(n),!0).forEach((function(t){f()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):K(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var z=function(e){var t=e.postId,n=e.creatorId,r=e.collectionId,i=e.isActiveExpandedPost,s=e.setDismissedPostId,l=(0,P.r)().viewerId,u=o.useState(!1),d=m()(u,2),a=d[0],p=d[1],f=(0,E.l)(n,r),v=f.muteAuthor,L=f.mutePub,R=(0,I.sK)().clearExpandedState,F=(0,h.k6)(),D=(0,b.jM)(),V=D.seeLessPostIds,U=D.setSeeLessPostIds,B=D.isMutingFromHomeFeed,K=(0,T.w)(),z=(0,y.Av)(),G=(0,A.pK)(),N=(0,M.PM)(),W=(0,C.v9)((function(e){return e.navigation.referrer})),Z=(0,C.v9)((function(e){return e.navigation.currentLocation})),Y={postId:t,location:Z,referrer:W,source:G,referrerSource:N},J=o.useRef(null),X=function(){null!==J.current&&window.clearTimeout(J.current)},q=function(){J.current=window.setTimeout((function(){z.event("post.see_less",Q({userId:l,collection:r},Y))}),5e3),B&&(U([].concat(c()(V),[t])),i&&(R(),F.goBack()),s&&s(t)),K({toastStyle:"USER_NEGATIVE_SIGNAL",extraParams:{onClickUndo:X}}),p(!1)},$=o.useCallback((function(){return o.createElement(S.mX,null,o.createElement(g.x,{borderBottom:"BASE_LIGHTER",paddingBottom:"4px",marginBottom:"4px"},o.createElement(S.Sl,null,o.createElement(x.r,{onClick:q,ariaLabel:"Show less like this"},o.createElement(g.x,{display:"flex",flexDirection:"row",alignItems:"center",borderBottom:void 0,ariaHidden:"true"},o.createElement(g.x,{marginRight:"4px"},o.createElement(j,null)),o.createElement(g.x,null,"Show less like this"))))),o.createElement(_,{creatorId:n,viewerId:l,muteAuthor:v,isActiveExpandedPost:i,hidePopover:function(){return p(!1)},eventData:Q({targetUserId:n},Y)}),r&&o.createElement(H,{collectionId:r,viewerId:l,mutePub:L,isActiveExpandedPost:i,hidePopover:function(){return p(!1)},eventData:Q({collection:r},Y)}),o.createElement(w.z,{postId:t,viewerId:l,targetUserId:n||"",shouldShowShortenedCopy:!0,hidePopover:function(){return p(!1)}}))}),[a,V]);return n?o.createElement(k.J,{isVisible:a,hide:function(){return p(!1)},popoverRenderFn:$},o.createElement(x.r,{onClick:function(){return p(!0)},ariaLabel:"More options"},o.createElement(O.Z,null))):null},G=function(e){var t=e.post,n=e.index,a=e.isActiveExpandedPost,c=e.setDismissedPostId,p=t.creator,f=t.collection,v=(0,i.H)().value,m=(0,s.gY)(f).viewerEdge,h=!(null==m||!m.isEditor),b=(null==v?void 0:v.id)===(null==p?void 0:p.id);return p?h||b?o.createElement(u.B,null,(function(e){var n=e.show;return o.createElement(r.Z,{post:t,creator:p,collection:f,showLoadingIndicator:n})})):0===n?o.createElement(l.o,{flag:d.T3.USER_SIGNAL_MENU,text:"Improve your recommendations by telling us which stories you're not interested in.",dismissText:"OK",placement:"top"},o.createElement(z,{postId:t.id,creatorId:p.id,collectionId:null==f?void 0:f.id,isActiveExpandedPost:a,setDismissedPostId:c})):o.createElement(z,{postId:t.id,creatorId:p.id,collectionId:null==f?void 0:f.id,isActiveExpandedPost:a,setDismissedPostId:c}):null}},30570:(e,t,n)=>{"use strict";n.d(t,{sK:()=>f,L0:()=>v});var o=n(28655),r=n.n(o),i=n(63038),s=n.n(i),l=n(71439),u=n(67294),d=n(73788),a=n(11615);function c(){var e=r()(["\n  fragment InlineExpansionContext_post on Post {\n    id\n    creator {\n      id\n      customStyleSheet {\n        id\n        blogroll {\n          visibility\n        }\n      }\n      isAuroraVisible\n      followedCollections\n      socialStats {\n        followingCount\n        collectionFollowingCount\n      }\n      ...UserSubscribeButton_user\n    }\n    collection {\n      id\n      canToggleEmail\n      description\n      isAuroraEligible\n      isAuroraVisible\n      viewerEdge {\n        id\n        isEditor\n      }\n      tagline\n    }\n    customStyleSheet {\n      id\n      blogroll {\n        visibility\n      }\n    }\n  }\n  ","\n"]);return c=function(){return e},e}var p=u.createContext({expandedPostId:null,setExpandedPostId:function(){},postInView:!1,setPostInView:function(){},expandedPost:null,setExpandedPost:function(){},clearExpandedState:function(){}}),f=function(){return u.useContext(p)},v=function(e){var t=e.children,n=u.useState(null),o=s()(n,2),r=o[0],i=o[1],l=u.useState(!1),a=s()(l,2),c=a[0],f=a[1],v=u.useState(null),m=s()(v,2),h=m[0],b=m[1];return u.createElement(p.Provider,{value:{expandedPostId:r,setExpandedPostId:i,postInView:c,setPostInView:f,expandedPost:h,setExpandedPost:b,clearExpandedState:function(){b(null),i(null),f(!1)}}},u.createElement(d.k,{post:h,preload:!0},t))};(0,l.Ps)(c(),a.w)},29577:(e,t,n)=>{"use strict";n.d(t,{L:()=>s});var o=n(68356),r=n.n(o),i=n(19725),s=r()({loader:function(){return Promise.all([n.e(17084),n.e(63303),n.e(5850),n.e(55402),n.e(99590),n.e(23913),n.e(97417)]).then(n.bind(n,55358))},modules:["src/components/responses/post/ThreadedResponsesSidebar"],webpack:function(){return[55358]},loading:function(){return null},render:(0,i.n)("ThreadedResponsesSidebar")})},73788:(e,t,n)=>{"use strict";n.d(t,{k:()=>a});var o=n(63038),r=n.n(o),i=n(67294),s=n(49486),l=n(29577),u=n(70586),d=n(92214),a=function(e){var t=e.children,n=e.post,o=e.preload,a=void 0===o||o,c=i.useState(void 0),p=r()(c,2),f=p[0],v=p[1],m=i.useCallback((function(e){return function(t){v(t),e()}}),[]);return i.createElement(u.E,{preload:a},(function(e){var o=e.showPreviousSidebar,r=e.hasLoaded,u=e.initialSidebarRender,a=e.isVisible,c=e.continueThisThreadPosts,p=e.openSidebar,h=e.cleanupSidebar;return i.createElement(s.Q.Provider,{value:{openSidebarToRespondToHighlight:m(p)}},!!n&&r&&i.createElement(l.L,{isResponsesSidebarVisible:a&&0===c.length,parentPost:n,inResponseToQuote:f,setInResponseToQuote:v,showPreviousSidebar:o,cleanupSidebar:h,initialSidebarRender:!!u.current}),!!n&&r&&c.map((function(e,t,r){var s=(0,d.iI)(t);return i.createElement(l.L,{key:n.id,isResponsesSidebarVisible:a&&t===r.length-1,parentPost:n,inResponseToQuote:f,setInResponseToQuote:v,continueThisThreadPost:e,continueThisThreadPostDepth:s,showPreviousSidebar:o,cleanupSidebar:h,initialSidebarRender:!!u.current})})),t)}))}},70586:(e,t,n)=>{"use strict";n.d(t,{E:()=>m});var o=n(319),r=n.n(o),i=n(63038),s=n.n(i),l=n(38125),u=n.n(l),d=n(67294),a=n(29577),c=n(72393),p=n(77180),f=n(27108),v=n(8403),m=function(e){var t=e.preload,n=e.children,o=d.useState(!1),i=s()(o,2),l=i[0],m=i[1],h=(0,p.F)(),b=!!(0,v.Wd)("responsesOpen"),E=d.useState(!1),I=s()(E,2),P=I[0],S=I[1],w=d.useRef(!0),g=d.useRef(0),x=d.useState(!1),k=s()(x,2),y=k[0],A=k[1],T=d.useCallback((function(){return S(!0)}),[]),M=d.useState([]),C=s()(M,2),O=C[0],L=C[1],R=d.useCallback((function(e){w.current=!1,L([].concat(r()(O),[e]))}),[O]),F=d.useCallback((function(){L(u()(O))}),[O]),j=d.useCallback((function(){S(!1),L([]),w.current=!0}),[]);d.useEffect((function(){A(!0),S(b)}),[b]);var D=function(){window.innerWidth<h.breakpoints.md&&m(!0)};return d.useEffect((function(){return D(),f.V6.on("resize",D),function(){return f.V6.off("resize",D)}}),[]),d.useEffect((function(){var e,t,n=null===(e=window)||void 0===e||null===(t=e.document)||void 0===t?void 0:t.documentElement;return l&&null!=n&&n.style&&(P?(n.style.top="-".concat(g.current,"px"),g.current=n.scrollTop,n.style.overflow="hidden",n.style.position="fixed"):(n.style.overflow="",n.style.position="",n.style.top="",n.scrollTop=g.current)),function(){l&&null!=n&&n.style&&(n.style.overflow="",n.style.position="",n.style.top="",n.scrollTop=g.current)}}),[P]),d.useEffect((function(){t&&a.L.preload()}),[t]),d.createElement(c.f.Provider,{value:{addContinueThisThreadSidebar:R,openSidebar:T,closeSidebar:j}},n({showPreviousSidebar:F,hasLoaded:y,initialSidebarRender:w,isVisible:P,continueThisThreadPosts:O,openSidebar:T,cleanupSidebar:j}))}}}]);
//# sourceMappingURL=https://stats.medium.build/lite/sourcemaps/37801.b8164057.chunk.js.map